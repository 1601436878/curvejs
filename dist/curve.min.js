/**
 * curvejs v0.3.1 By dntzhang
 * Github: https://github.com/AlloyTeam/curvejs
 * MIT Licensed.
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.curvejs=e()}(this,function(){"use strict";function t(t,e,n,i,o,a,r){var s={x:t-n,y:e-i},l=[[Math.cos(o),-Math.sin(o)],[Math.sin(o),Math.cos(o)]];r[a]=n+l[0][0]*s.x+l[0][1]*s.y,r[a+1]=i+l[1][0]*s.x+l[1][1]*s.y}function e(e,n){var i=(e[0]+e[6])/2,o=(e[1]+e[7])/2;t(e[0],e[1],i,o,n,0,e),t(e[2],e[3],i,o,n,2,e),t(e[4],e[5],i,o,n,4,e),t(e[6],e[7],i,o,n,6,e)}function n(t,e){var n=t*t+e*e;if(0===n)return[0,0];var i=Math.sqrt(n);return[t/i,e/i]}function i(t,e){return t*t+e*e}function o(t){var e=y.n(t[0]-t[6],t[1]-t[7]);t[0]+=e[0],t[1]+=e[1],t[6]-=e[0],t[7]-=e[1]}function a(t){var e=y.n(t[0]-t[6],t[1]-t[7]);t[0]-=e[0],t[1]-=e[1],t[6]+=e[0],t[7]+=e[1]}function r(t){}function s(t,e){var n=[t[2]-t[0],t[3]-t[1]],i=[t[4]-t[2],t[5]-t[3]],o=[t[6]-t[4],t[7]-t[5]],a=[e[2]-e[0],e[3]-e[1]],r=[e[4]-e[2],e[5]-e[3]],s=[e[6]-e[4],e[7]-e[5]],l=y.n(a[0]-n[0],a[1]-n[1]);t[0]-=l[0],t[1]-=l[1];var h=y.n(r[0]-i[0],r[1]-i[1]);t[4]+=h[0],t[5]+=h[1];var u=y.n(s[0]-o[0],s[1]-o[1]);t[6]+=u[0],t[7]+=u[1]}function l(t){t[2]+=t[2]>t[0]?-1:1,t[3]+=t[3]>t[1]?-1:1,t[4]+=t[4]>t[6]?-1:1,t[5]+=t[5]>t[7]?-1:1}function h(t,e){var n=[[Math.cos(e.angle),-Math.sin(e.angle)],[Math.sin(e.angle),Math.cos(e.angle)]];this.data.angle+=e.step,t[0]=t[0]+n[0][0],t[1]=t[1]+n[1][0],t[6]=t[6]+n[0][0],t[7]=t[7]+n[1][0]}function u(t,e,n,i,o){var a=t.x,r=t.y,s=e.x,l=e.y,h=n.x,u=n.y,c=i.x,d=i.y,p=(s-a)*o+a,f=(l-r)*o+r,v=(h-s)*o+s,g=(u-l)*o+l,y=(c-h)*o+h,m=(d-u)*o+u,w=(v-p)*o+p,b=(g-f)*o+f;return[a,r,p,f,w,b,((y-v)*o+v-w)*o+w,((m-g)*o+g-b)*o+b]}function c(t,e,n){return p(d(t),d(e),n)}function d(t){if(F[t])return F[t];var e=null;I[t]&&(e=t,t=R(I[t]));t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,n,i){return e+e+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),i=e||t;return F[i]=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null,F[i]}function p(t,e,n){function i(t,e){return t+Math.round(n/100*(e-t))}function o(t){t=Math.min(t,255),t=Math.max(t,0);var e=t.toString(16);return e.length<2&&(e="0"+e),e}var a={};return n<0&&(n=0),n>100&&(n=100),a.r=i(t.r,e.r),a.g=i(t.g,e.g),a.b=i(t.b,e.b),a.cssColor="#"+o(a.r)+o(a.g)+o(a.b),a.cssColor}!function(){Date.now||(Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}();var f,v=function(t,e){var n=this.copyPoints,i=e.angle,o=e.r,a=[[Math.cos(i),-Math.sin(i)],[Math.sin(i),Math.cos(i)]];t[0]=n[0]+a[0][0]*o,t[1]=n[1]+a[1][0]*o,t[2]=n[2]+a[0][0]*o,t[3]=n[3]+a[1][0]*o,t[4]=n[4]+a[0][0]*o,t[5]=n[5]+a[1][0]*o,t[6]=n[6]+a[0][0]*o,t[7]=n[7]+a[1][0]*o,e.angle+=e.step},g=function(t,e){t.forEach(function(n,i){t[i]+=e[i]})},y={n:n,sl:i},m={close:a,open:o,auto:r},w=function(t,e){e.value-=e.step,e.value<0&&(e.value=0);var n=u({x:this.copyPoints[0],y:this.copyPoints[1]},{x:this.copyPoints[2],y:this.copyPoints[3]},{x:this.copyPoints[4],y:this.copyPoints[5]},{x:this.copyPoints[6],y:this.copyPoints[7]},e.value);t.forEach(function(e,i){t[i]=n[i]})},b={},k=4,_=.5,x=function(t){return.5*(1-Math.cos(t*Math.PI))};b.noise=function(t,e,n){if(e=e||0,n=n||0,null==f){f=new Array(4096);for(var i=0;i<4096;i++)f[i]=Math.random()}t<0&&(t=-t),e<0&&(e=-e),n<0&&(n=-n);for(var o,a,r,s,l,h=Math.floor(t),u=Math.floor(e),c=Math.floor(n),d=t-h,p=e-u,v=n-c,g=0,y=.5,m=0;m<k;m++){var w=h+(u<<4)+(c<<8);o=x(d),a=x(p),r=f[4095&w],r+=o*(f[w+1&4095]-r),s=f[w+16&4095],s+=o*(f[w+16+1&4095]-s),r+=a*(s-r),w+=256,s=f[4095&w],s+=o*(f[w+1&4095]-s),l=f[w+16&4095],l+=o*(f[w+16+1&4095]-l),s+=a*(l-s),r+=x(v)*(s-r),g+=r*y,y*=_,h<<=1,d*=2,u<<=1,p*=2,c<<=1,v*=2,d>=1&&(h++,d--),p>=1&&(u++,p--),v>=1&&(c++,v--)}return g},b.noiseDetail=function(t,e){t>0&&(k=t),e>0&&(_=e)},b.noiseSeed=function(t){var e=function(){var t,e,n=4294967296;return{setSeed:function(i){e=t=(null==i?Math.random()*n:i)>>>0},getSeed:function(){return t},rand:function(){return(e=(1664525*e+1013904223)%n)/n}}}();e.setSeed(t),f=new Array(4096);for(var n=0;n<4096;n++)f[n]=e.rand()};var M=function(t,e){e.value+=e.step,t[0]=e.width*b.noise(e.value+15),t[1]=e.height*b.noise(e.value+25),t[2]=e.width*b.noise(e.value+35),t[3]=e.height*b.noise(e.value+45),t[4]=e.width*b.noise(e.value+55),t[5]=e.height*b.noise(e.value+65),t[6]=e.width*b.noise(e.value+75),t[7]=e.height*b.noise(e.value+85)},P={dance:v,move:g,rotate:e,to:s,line:l,circle:h,close:m.close,open:m.open,expand:w,noise:M},A=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},T=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),q=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},S=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},C=function(){function t(e){A(this,t),this.points=e.points||[],this.color=e.color||"black",this.x=e.x||0,this.y=e.y||0,this.vision=e.vision||[0,0,0,0,0,0,0,0],this.visionMax=720,this.visionInterval=e.visionInterval||10,this._preDate=Date.now(),this._now=new Date,this.data=e.data,this._noop=function(){},this._ease=function(t){return t},this._targetPoints=null,this.copyPoints=this.points.slice(0),this.motion=e.motion||this._noop,this.visionAlpha=void 0===e.visionAlpha?.2:e.visionAlpha,(void 0===e.initVision||e.initVision)&&this._initVision(e.visionCount||80)}return T(t,[{key:"_initVision",value:function(){for(var t=0;t<80;t++)this.tick(!0)}},{key:"tick",value:function(t){this._now=Date.now(),(this._now-this._preDate>this.visionInterval||t)&&(this.vision.push.apply(this.vision,this.points),this.vision.push(this.color),this.vision.length>this.visionMax&&this.vision.splice(0,9),this._preDate=this._now),this.pauseMotion||this.motion.call(this,this.points,this.data),this._targetPoints&&this._pointsTo()}},{key:"pause",value:function(){this.pauseMotion=!0}},{key:"play",value:function(){this.pauseMotion=!1}},{key:"draw",value:function(t){this.tick(),t.save(),t.translate(this.x,this.y),t.globalAlpha=1,t.strokeStyle=this.color;var e=this.points;t.beginPath(),t.moveTo.call(t,e[0],e[1]),t.bezierCurveTo.call(t,e[2],e[3],e[4],e[5],e[6],e[7]),t.stroke();for(var n=this.vision,i=0,o=n.length;i<o;i+=9)t.globalAlpha=i/this.visionMax*this.visionAlpha,t.strokeStyle=n[i+8],t.beginPath(),t.moveTo.call(t,n[i],n[i+1]),t.bezierCurveTo.call(t,n[i+2],n[i+3],n[i+4],n[i+5],n[i+6],n[i+7]),t.stroke();t.restore()}},{key:"pointsTo",value:function(t,e,n){this.pause();var i=this.points;this._targetPoints=t,this._pto=n,this._ptStart=n.start||this._noop,this._ptProgress=n.progress||this._noop,this._ptEnd=n.end||this._noop,this._ptEase=n.ease||this._ease,this._ptTime=e,this._ptStartTime=Date.now(),this._ptCopyPoints=i.slice(0),this._ptDistance=[t[0]-i[0],t[1]-i[1],t[2]-i[2],t[3]-i[3],t[4]-i[4],t[5]-i[5],t[6]-i[6],t[7]-i[7]],this._ptStart.call(this,0)}},{key:"translatePoints",value:function(t,e,n){t=Object.assign({x:0,y:0},t);var i=this.points;this.pointsTo([i[0]+t.x,i[1]+t.y,i[2]+t.x,i[3]+t.y,i[4]+t.x,i[5]+t.y,i[6]+t.x,i[7]+t.y],e,n)}},{key:"_pointsTo",value:function(){var t=this,e=this.points,n=Date.now()-this._ptStartTime;if(n<this._ptTime){var i=n/this._ptTime;e.forEach(function(n,o){e[o]=t._ptCopyPoints[o]+t._ptDistance[o]*t._ptEase(i)}),this._ptProgress.call(this,i)}else e=this._targetPoints.slice(0),this._ptEnd.call(this,1),this._targetPoints=null}},{key:"colorTo",value:function(){}},{key:"clone",value:function(){}}]),t}(),D=function(){function t(){A(this,t),this.children=[]}return T(t,[{key:"add",value:function(t){this.children.push(t)}},{key:"remove",value:function(t){for(var e=0,n=this.children.length;e<n;e++)if(t===this.children[e]){this.children.splice(e,1);break}}},{key:"draw",value:function(t){this.children.forEach(function(e){e.draw(t)})}}]),t}(),E=function(t){function e(t,n,i){A(this,e);var o=S(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return 1===arguments.length?(o.canvas=t,o.ctx=o.canvas.getContext("2d"),o.width=o.canvas.width,o.height=o.canvas.height):3===arguments.length&&(o.canvas=document.createElement("canvas"),o.canvas.width=t,o.canvas.height=n,o.width=t,o.height=n,o.ctx=o.canvas.getContext("2d"),document.querySelector(i).appendChild(o.canvas)),o}return q(e,t),T(e,[{key:"update",value:function(){var t=this;this.ctx.clearRect(0,0,this.width,this.height),this.children.forEach(function(e){e.draw(t.ctx)})}},{key:"addExistLine",value:function(t){}},{key:"sameAs",value:function(t){}}]),e}(D),j={c:[[70,70,12,76,12,123,70,128]],u:[[25,68,23,140,80,140,74,100],[73,62,72,90,75,110,93,134]],r:[[21,62,21,62,21,128,21,128],[21,128,17,96,17,68,65,60]],v:[[12,58,41,132,61,132,96,58]],e:[[44,104,112,52,-20,82,77,136]],j:[[52,48,53,48,54,49,52,48],[8,175,24,204,60,197,56,74]],s:[[81,72,17,42,105,145,41,120]],l:[[77,27,30,114,36,126,57,126]],i:[[56,71,56,72,59,70,56,73],[47,93,59,81,47,121,59,111]]},O=function(t){function e(t,n){A(this,e);var i=S(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n=Object.assign({x:0,y:0,color:"black"},n),i.x=n.x,i.y=n.y,i.color=n.color,i.word=t,i.data=n.data,i.motion=n.motion,i.points=j[t],i._init(),i}return q(e,t),T(e,[{key:"_init",value:function(){var t=this;this.points.forEach(function(e){t.add(new C({x:t.x,y:t.y,points:e,color:t.color,data:t.data,motion:t.motion}))})}}]),e}(D),F={},I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662680,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14184595,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},R="1"==="01".substr(-1)?function(t){return"#"+("00000"+t.toString(16)).substr(-6)}:function(t){var e=t.toString(16);return"#"+new Array(e.length<6?6-e.length+1:0).join("0")+e};return{Curve:C,Group:D,Stage:E,motion:P,Word:O,perlin:b,color:{lerp:c,hexToRgb:d,makeGradientColor:p}}});
